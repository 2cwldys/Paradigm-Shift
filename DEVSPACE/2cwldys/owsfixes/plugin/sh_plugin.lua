local Clockwork = Clockwork
local PLUGIN = PLUGIN
PLUGIN:SetGlobalAlias("OWSFixes")

Clockwork.kernel:IncludePrefixed("sv_plugin.lua")

--called when the Clockwork Schema has loaded.
function PLUGIN:ClockworkSchemaLoaded()
	--[[This will overwrite the stored Combine soldier animations, to apply the fix while avoiding direct changes to the schema files.]]

Clockwork.animation.stored.combineOverwatch = {
    ["crouch_grenade_aim_idle"] = ACT_COVER_LOW,
    ["crouch_pistol_aim_idle"] = ACT_CROUCHIDLE,
    ["crouch_pistol_aim_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["stand_grenade_aim_idle"] = ACT_IDLE,
    ["stand_pistol_aim_walk"] = ACT_WALK_AIM_RIFLE,
    ["stand_grenade_aim_run"] = ACT_RUN_AIM_SHOTGUN,
    ["stand_grenade_aim_walk"] = ACT_WALK_AIM_SHOTGUN,
    ["crouch_heavy_aim_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["crouch_blunt_aim_idle"] = ACT_RANGE_AIM_AR2_LOW,
    ["stand_pistol_aim_idle"] = ACT_IDLE_ANGRY_SMG1,
    ["crouch_heavy_aim_idle"] = ACT_CROUCHIDLE,
    ["crouch_blunt_aim_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["stand_pistol_aim_run"] = ACT_RUN_AIM_RIFLE,
    ["crouch_slam_aim_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["crouch_fist_aim_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["crouch_slam_aim_idle"] = ACT_RANGE_AIM_AR2_LOW,
    ["stand_blunt_aim_idle"] = ACT_IDLE_MANNEDGUN,
    ["crouch_fist_aim_idle"] = ACT_CROUCHIDLE,
    ["stand_blunt_aim_walk"] = ACT_WALK_AIM_SHOTGUN,
    ["stand_heavy_aim_idle"] = ACT_IDLE_ANGRY_SMG1,
    ["stand_heavy_aim_walk"] = ACT_WALK_AIM_RIFLE,
    ["crouch_smg_aim_idle"] = ACT_CROUCHIDLE,
    ["crouch_grenade_idle"] = ACT_COVER_LOW,
    ["crouch_smg_aim_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["crouch_grenade_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["stand_fist_aim_idle"] = ACT_IDLE_ANGRY_SMG1,
    ["stand_heavy_aim_run"] = ACT_RUN_AIM_RIFLE,
    ["stand_blunt_aim_run"] = ACT_RUN_AIM_SHOTGUN,
    ["stand_slam_aim_idle"] = ACT_IDLE_MANNEDGUN,
    ["stand_fist_aim_walk"] = ACT_WALK_AIM_RIFLE,
    ["stand_grenade_idle"] = "Idle_Unarmed",
    ["crouch_pistol_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["stand_smg_aim_walk"] = ACT_WALK_AIM_RIFLE,
    ["crouch_pistol_idle"] = ACT_CROUCHIDLE,
    ["stand_grenade_walk"] = "WalkUnarmed_all",
    ["stand_fist_aim_run"] = ACT_RUN_AIM_RIFLE,
    ["stand_slam_aim_run"] = ACT_RUN_RIFLE,
    ["stand_smg_aim_idle"] = ACT_IDLE_ANGRY_SMG1,
    ["stand_smg_aim_run"] = ACT_RUN_AIM_RIFLE,
    ["crouch_blunt_idle"] = ACT_COVER_LOW,
    ["crouch_blunt_walk"] = ACT_WALK_CROUCH,
    ["crouch_heavy_idle"] = ACT_CROUCHIDLE,
    ["stand_pistol_idle"] = "Idle_Unarmed",
    ["stand_pistol_walk"] = "WalkUnarmed_all",
    ["stand_grenade_run"] = ACT_RUN_RIFLE,
    ["crouch_heavy_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["crouch_slam_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["stand_blunt_walk"] = "WalkUnarmed_all",
    ["stand_pistol_run"] = ACT_RUN_RIFLE,
    ["stand_heavy_walk"] = "WalkEasy_all",
    ["stand_heavy_idle"] = ACT_IDLE,
    ["crouch_fist_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["crouch_slam_idle"] = ACT_COVER_LOW,
    ["crouch_fist_idle"] = ACT_CROUCHIDLE,
    ["stand_blunt_idle"] = "Idle_Unarmed",
    ["stand_heavy_run"] = ACT_RUN_RIFLE,
    ["stand_fist_idle"] = "Idle_Unarmed",
    ["crouch_smg_idle"] = ACT_CROUCHIDLE,
    ["stand_fist_walk"] = "WalkUnarmed_all",
    ["stand_slam_idle"] = "Idle_Unarmed",
    ["stand_blunt_run"] = ACT_RUN_RIFLE,
    ["crouch_smg_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["stand_smg_walk"] = "WalkEasy_all",
    ["stand_slam_run"] = ACT_RUN_RIFLE,
    ["stand_smg_idle"] = ACT_IDLE,
    ["stand_fist_run"] = ACT_RUN_RIFLE,
    ["grenade_attack"] = ACT_RANGE_ATTACK_THROW,
    ["stand_smg_run"] = ACT_RUN_RIFLE,
    ["pistol_attack"] = ACT_GESTURE_RANGE_ATTACK_SMG1,
    ["pistol_reload"] = ACT_GESTURE_RELOAD,
    ["blunt_attack"] = ACT_MELEE_ATTACK1,
    ["heavy_attack"] = ACT_GESTURE_RANGE_ATTACK_SMG1,
    ["heavy_reload"] = ACT_GESTURE_RELOAD,
    ["crouch_walk"] = ACT_WALK_CROUCH_RIFLE,
    ["slam_attack"] = ACT_SPECIAL_ATTACK2,
    ["crouch_idle"] = ACT_CROUCHIDLE,
    ["stand_walk"] = "WalkUnarmed_all",
    ["stand_idle"] = "Idle_Unarmed",
    ["smg_attack"] = ACT_GESTURE_RANGE_ATTACK_SMG1,
    ["smg_reload"] = ACT_GESTURE_RELOAD,
    ["stand_run"] = ACT_RUN_RIFLE,
    ["jump"] = ACT_GLIDE,
    ["sit"] = ACT_COVER_LOW,
    ["hands"] = {
        body = 0000000,
        model = "models/weapons/c_arms_combine.mdl",
        skin = 0
    }
}

Clockwork.animation.stored.civilProtection = {
	["crouch_grenade_aim_idle"] = ACT_COVER_PISTOL_LOW,
	["crouch_grenade_aim_walk"] = ACT_WALK,
	["stand_grenade_aim_idle"] = ACT_IDLE,
	["crouch_pistol_aim_idle"] = ACT_COVER_SMG1_LOW,
	["stand_grenade_aim_walk"] = ACT_WALK_ANGRY,
	["crouch_pistol_aim_walk"] = ACT_WALK_CROUCH,
	["crouch_heavy_aim_idle"] = ACT_COVER_SMG1_LOW,
	["crouch_blunt_aim_idle"] = ACT_COVER_SMG1_LOW,
	["stand_grenade_aim_run"] = ACT_RUN,
	["crouch_blunt_aim_walk"] = ACT_WALK_CROUCH,
	["crouch_heavy_aim_walk"] = ACT_WALK_CROUCH,
	["stand_pistol_aim_walk"] = ACT_WALK_AIM_PISTOL,
	["stand_pistol_aim_idle"] = ACT_RANGE_ATTACK_PISTOL,
	["crouch_fist_aim_walk"] = ACT_WALK_CROUCH,
	["crouch_slam_aim_walk"] = ACT_WALK_CROUCH,
	["stand_pistol_aim_run"] = ACT_RUN_AIM_PISTOL,
	["crouch_fist_aim_idle"] = ACT_COVER_SMG1_LOW,
	["stand_heavy_aim_idle"] = ACT_IDLE_ANGRY_SMG1,
	["stand_blunt_aim_idle"] = ACT_IDLE_ANGRY_MELEE,
	["crouch_slam_aim_idle"] = ACT_RANGE_AIM_PISTOL_LOW,
	["stand_blunt_aim_walk"] = ACT_WALK_ANGRY,
	["stand_heavy_aim_walk"] = ACT_WALK_AIM_RIFLE,
	["stand_fist_aim_idle"] = ACT_RANGE_ATTACK_SMG1,
	["crouch_smg_aim_walk"] = ACT_WALK_CROUCH,
	["crouch_smg_aim_idle"] = ACT_COVER_SMG1_LOW,
	["stand_fist_aim_walk"] = ACT_WALK_AIM_RIFLE,
	["stand_blunt_aim_run"] = ACT_RUN,
	["stand_heavy_aim_run"] = ACT_RUN_AIM_RIFLE,
	["crouch_grenade_walk"] = ACT_WALK_CROUCH,
	["crouch_grenade_idle"] = ACT_COVER_PISTOL_LOW,
	["stand_slam_aim_idle"] = ACT_IDLE_MANNEDGUN,
	["stand_slam_aim_walk"] = ACT_WALK_RIFLE,
	["stand_slam_aim_run"] = ACT_RUN_RIFLE,
	["stand_smg_aim_idle"] = ACT_IDLE_ANGRY_SMG1,
	["stand_smg_aim_walk"] = ACT_WALK_AIM_RIFLE,
	["stand_fist_aim_run"] = ACT_RUN_RIFLE,
	["crouch_pistol_idle"] = ACT_COVER_PISTOL_LOW,
	["stand_grenade_walk"] = ACT_WALK,
	["crouch_pistol_walk"] = ACT_WALK_CROUCH,
	["stand_grenade_idle"] = ACT_IDLE,
	["stand_grenade_run"] = ACT_RUN,
	["crouch_blunt_idle"] = ACT_COVER_PISTOL_LOW,
	["stand_pistol_walk"] = "walk_hold_pistol",
	["crouch_blunt_walk"] = ACT_WALK_CROUCH,
	["crouch_heavy_walk"] = ACT_WALK_CROUCH,
	["stand_pistol_idle"] = ACT_IDLE,
	["crouch_heavy_idle"] = ACT_COVER_SMG1_LOW,
	["stand_smg_aim_run"] = ACT_RUN_AIM_RIFLE,
	["stand_heavy_walk"] = ACT_WALK_RIFLE,
	["stand_blunt_walk"] = ACT_WALK,
	["stand_blunt_idle"] = ACT_IDLE,
	["crouch_fist_idle"] = ACT_COVER_PISTOL_LOW,
	["crouch_fist_walk"] = ACT_WALK_CROUCH,
	["crouch_slam_idle"] = ACT_COVER_PISTOL_LOW,
	["stand_pistol_run"] = "run_hold_pistol",
	["stand_heavy_idle"] = ACT_IDLE_SMG1,
	["crouch_slam_walk"] = ACT_WALK_CROUCH,
	["stand_heavy_run"] = ACT_RUN_RIFLE,
	["stand_slam_idle"] = ACT_IDLE,
	["stand_fist_walk"] = ACT_WALK,
	["stand_slam_walk"] = ACT_WALK,
	["stand_blunt_run"] = ACT_RUN,
	["crouch_smg_walk"] = ACT_WALK_CROUCH,
	["crouch_smg_idle"] = ACT_COVER_SMG1_LOW,
	["stand_fist_idle"] = ACT_IDLE,
	["stand_slam_run"] = ACT_RUN,
	["grenade_attack"] = ACT_RANGE_ATTACK_THROW,
	["stand_smg_idle"] = ACT_IDLE_SMG1,
	["stand_fist_run"] = ACT_RUN,
	["stand_smg_walk"] = ACT_WALK_RIFLE,
	["pistol_attack"] = ACT_GESTURE_RANGE_ATTACK_PISTOL,
	["stand_smg_run"] = ACT_RUN_RIFLE,
	["pistol_reload"] = ACT_GESTURE_RELOAD_PISTOL,
	["heavy_reload"] = ACT_GESTURE_RELOAD_SMG1,
	["heavy_attack"] = ACT_GESTURE_RANGE_ATTACK_SMG1,
	["blunt_attack"] = ACT_MELEE_ATTACK_SWING,
	["crouch_idle"] = ACT_COVER_PISTOL_LOW,
	["crouch_walk"] = ACT_WALK_CROUCH,
	["slam_attack"] = ACT_PICKUP_GROUND,
	["stand_idle"] = ACT_IDLE,
	["stand_walk"] = ACT_WALK,
	["smg_attack"] = ACT_GESTURE_RANGE_ATTACK_SMG1,
	["smg_reload"] = ACT_GESTURE_RELOAD_SMG1,
	["stand_run"] = ACT_RUN,
	["jump"] = ACT_GLIDE,
	["sit"] = ACT_COVER_PISTOL_LOW,
	["hands"] = {
		body = 0000000,
		model = "models/weapons/c_arms_combine.mdl",
		skin = 0
	}
}
end;